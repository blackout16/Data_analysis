---
title: "hw01"
author: "Chufarov Konstantin"
date: "2024-10-19"
output:
  pdf_document: default
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Анализ данных: дождевые осадки

### Загрузка данных

Для начала загрузим набор данных о количестве осадков в Канаде за период с 1960 по 1980 годы, используя функцию `read.table()`. Назовем датафрейм `rainfall_data`.

```{r}
rainfall_data <- read.table("https://people.math.umass.edu/~anna/Stat597AFall2016/rnf6080.dat")
cat("Число строк в таблице: ", nrow(rainfall_data))
cat("\nЧисло столбцов в таблице: ", ncol(rainfall_data))
```

### Имена колонок

Получим список названий столбцов для анализа структуры данных.

```{r}
colnames(rainfall_data)
```

### Доступ к элементам

Получим значение из 5-й строки и 7-го столбца, чтобы убедиться, что данные загружены правильно.

```{r}
rainfall_data[5, 7]
```

Также выведем на экран вторую строку таблицы.

```{r}
rainfall_data[2, ]
```

### Замена заголовков

Теперь заменим имена столбцов на более удобные для анализа.

```{r}
names(rainfall_data) <- c("year", "month", "day", seq(0, 23))
```

Посмотрим, как выглядят первые и последние строки таблицы, используя `head()` и `tail()`.

```{r}
head(rainfall_data)
tail(rainfall_data)
```

### Добавление столбца с суточными осадками

Добавим новый столбец `daily`, который будет содержать сумму значений осадков за каждый день.

```{r}
rainfall_data$daily <- rowSums(rainfall_data[, 4:27])
head(rainfall_data)
hist(rainfall_data$daily, main = "Распределение осадков за день", xlab = "Осадки", ylab = "Частота")
```

Мы видим, что в таблице есть некорректные значения, такие как -999, которые необходимо исключить.

### Исправление ошибки

Создадим новый датафрейм, в котором будут удалены некорректные данные.

```{r}
cleaned_data <- rainfall_data[rainfall_data$daily > 0, ]
hist(cleaned_data$daily, main = "Скорректированное распределение осадков", xlab = "Осадки", ylab = "Частота", breaks = 80)
```

### Работа с векторами

#### Пример 1: Вектор строк

Попробуем применить различные функции к строковому вектору.

```{r}
v <- c("4", "8", "15", "16", "23", "42")
v_numeric <- as.numeric(v)
max(v_numeric)
sort(v_numeric)
sum(v_numeric)
```

#### Пример 2: Вектор с элементами разных типов

Рассмотрим смешанный тип данных.
Сложение вызовет ошибку. Вектор смешанного типа автоматически преобразуется в строковый.

```{r}
v2 <- c("5", 7, 12)
# v2[2] + v2[3]
```

#### Пример 3: Работа с датафреймом

Произведём вычисления с элементами датафрейма.

```{r}
df3 <- data.frame(z1="5", z2 = 7, z3 = 12)
df3[1, 2] + df3[1, 3]
```

#### Пример 4: Операции со списком

Работаем со списками:

```{r}
l4 <- list(z1="6", z2=42, z3="49", z4=126)
l4[[2]] + l4[[4]]
# l4[2] + l4[4]
```
Второе выражение вызовет ошибку, так как обращение l4[2] и l4[4] возвращает список, а не числовые значения.


### Операторы и функции

#### Последовательность чисел

Создадим последовательность чисел при помощи функции `seq()`.

```{r}
seq(1, 10000, by=372)
seq(1, 10000, length.out=50)
```

#### Повторение элементов вектора

Разница между функциями `rep()`.

```{r}
rep(1:5, times=3)
rep(1:5, each=3)
```

Первое выражение повторяет весь вектор 1:5 три раза.
Второе выражение повторяет каждый элемент вектора три раза.
